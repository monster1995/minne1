<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <style>
        *{
            margin: 0px;
            padding: 0;
        }

        #drag{
            width:150px;
            height: 150px;
            background: lightcoral;
            position: absolute;

        }
    </style>
</head>
<body>
<div id="drag">

</div>


<script>

    var oDiv1=document.getElementById('drag');
    oDiv1.onmousedown = function (e) {
        e=e||window.event;
        var ileft = e.clientX - oDiv1.offsetLeft;
        var itop = e.clientY - oDiv1.offsetTop;

        document.onmousemove=function(e){
            e=e||window.event;
            var left = e.clientX - ileft;
            var top = e.clientY - itop;


            if(left<0){
                left=0;
            }else if(left>document.documentElement.clientWidth-oDiv1.offsetWidth){
                left=document.documentElement.clientWidth-oDiv1.offsetWidth
                //只能用off;  因为.width是内联函数，这里取不到。
            }
            if(top<0){
                top=0;
            }else if(top>document.documentElement.clientHeight-oDiv1.offsetHeight){
                top=document.documentElement.clientHeight-oDiv1.offsetHeight
            }


            oDiv1.style.left = left +'px';
            oDiv1.style.top = top +'px';
        }


        document.onmouseup=function(){
            document.onmousemove=null;
        }



    }
</script>

</body>
</html>